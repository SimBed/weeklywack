
<div class="d-flex mb-2 wk_option">
  <div class="smallcircle mr-2">
    <%#= link_to favourites_path, {class: "search", title: "Favourites", data: { toggle: 'tooltip'}} do%>
    <%= link_to favourites_path, {class: "search"} do%>
    <% if session[:favesonly] == true then %>
          <i class ="far fa-heart"></i>
       <% else %>
          <i class ="fas fa-heart"></i>
      <% end %>
    <% end %>
  </div>

  <div class="smallcircle mr-2">
    <button onclick="toggleHidden()" class="advsearch">
      <i id="advsearch_toggler" class="fa fa-filter <%= "advsearch_toggler_hide" if session[:advsearchshow] == "show" %>"></i>
    </button>
    <!--div id="showsearch" class="wk_options_label"><%#= session[:advsearchshow] == true ? "Hide Search Options" : "Show Search Options" %></div-->
  </div>

</div>

  <div id="advsearch_options" class="container search <%= session[:advsearchshow] == "show" ? "advsearch_show" : "advsearch_hide" %>">
      <hr class = "search"></hr>

  <%= form_with(url: "/workouts/search", method: "get", local: true) do %>

  <div class="field">
  <%= text_field_tag :search_name, nil, class: "form-control-sm mb-2 search", placeholder: "Keywordsâ€¦", value: session[:search_name] %>
  </div>

  <div class="container mb-1">
  <div class="row">

  <div class="col-4">
  <fieldset class="d-flex">
    <legend>STYLE</legend>
    <% @style.each do |style| %>
      <div>
        <%= check_box_tag 'style[]', style, session[:filter_style].present? ? session[:filter_style].include?(style) : false %>
        <%= label_tag 'style[]', style %>
      </div>
    <% end %>
  </fieldset>
  </div>

  <div class="col-4">
  <fieldset class="d-flex">
    <legend>INTENSITY</legend>
    <% @intensity.each do |intensity| %>
      <div>
        <%= check_box_tag 'intensity[]', intensity, session[:filter_intensity].present? ? session[:filter_intensity].include?(intensity) : false %>
        <%= label_tag 'intensity[]', intensity %>
      </div>
    <% end %>
  </fieldset>
  </div>

  <div class="col-4">
  <fieldset class="d-flex">
    <legend>FOCUS</legend>
    <% @bodyfocus.each do |bodyfocus| %>
      <div>
        <%= check_box_tag 'bodyfocus[]', bodyfocus, session[:filter_bodyfocus].present? ? session[:filter_bodyfocus].include?(bodyfocus) : false %>
        <%= label_tag 'bodyfocus[]', bodyfocus %>
      </div>
    <% end %>
  </fieldset>
  </div>

  </div>
  </div>

  <%= hidden_field_tag 'advsearchshow', 'show'  %>

  <div class="container d-flex">
      <%= button_tag class: "search", type: 'submit' do %>
      <i class="fa fa-search"> Search</i>
      <% end %>

      <%= link_to clear_path, class: "search searchdelete" do%>
      <i class="fa fa-trash"> Filters</i>
      <% end %>
  </div>

<% end %>
<hr class = "search"></hr>

  </div>

<script>

function toggleHidden() {
//hide/display search
      var x = document.getElementById("advsearch_options");
      x.classList.toggle('advsearch_hide');

      var y = document.getElementById("advsearch_toggler");
      y.classList.toggle('advsearch_toggler_hide');

      //let Rails know whether display is show or hide. Set the hidden field in the form to true/false.
      //element with id = advsearchshow is the form hidden field
      var z = document.getElementById("advsearchshow");
      if (x.classList.contains("advsearch_hide")) {
        z.value = "hide";
      } else {
        z.value = "show";
      }
    }

</script>
